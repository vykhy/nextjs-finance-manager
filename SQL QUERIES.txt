CREATE TABLE IF NOT EXISTS users (
	id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP()
);

CREATE TABLE IF NOT EXISTS transactiontypes (
	id INT PRIMARY KEY AUTO_INCREMENT,
    type VARCHAR(155) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP()
);

CREATE TABLE IF NOT EXISTS paymentmethod (
	id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(155) NOT NULL,
    userid INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    FOREIGN KEY (userid) REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS category (
	id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(155) NOT NULL,
    userid INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    FOREIGN KEY (userid) REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS account(
	id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    userid INT NOT NULL,
    balance DOUBLE(15,2) NOT NULL DEFAULT 0,
    createdat TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    modifiedat TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    FOREIGN KEY (userid) REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS transfer(
	id INT PRIMARY KEY AUTO_INCREMENT,
    item VARCHAR(255) NOT NULL,
    toaccountid INT NOT NULL,
    fromaccountid INT NOT NULL,
    amount DOUBLE(15,2) NOT NULL DEFAULT 0,
    createdat TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    modifiedat TIMESTAMP DEFAULT CURRENT_TIMESTAMP(),
    FOREIGN KEY (toaccountid) REFERENCES account(id),
    FOREIGN KEY (fromaccountid) REFERENCES account (id)
);

CREATE TABLE IF NOT EXISTS transaction(
	id INT PRIMARY KEY AUTO_INCREMENT,
    item VARCHAR(255) NOT NULL,
    categoryid INT NOT NULL,
    amount DOUBLE(20, 2) NOT NULL DEFAULT 0,
    paymentmethodid INT NOT NULL,
    typeid INT NOT NULL,
    accountid INT NOT NULL,
    createdat TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    modifiedat TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(),
    FOREIGN KEY(accountid) REFERENCES account(id),
    FOREIGN KEY(categoryid) REFERENCES category(id),
    FOREIGN KEY(typeid) REFERENCES transactiontypes(id),
    FOREIGN KEY(paymentmethodid) REFERENCES paymentmethod(id)
)
